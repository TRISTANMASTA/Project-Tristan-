  Serial.print("Session present: ");
    Serial.println(sessionPresent);
    }

    void onMqttDisconnect(AsyncMqttClientDisconnectReason reason) {
      Serial.println("Disconnected from MQTT.");
        if (WiFi.isConnected()) {
            xTimerStart(mqttReconnectTimer, 0);
              }
              }

              /*void onMqttSubscribe(uint16_t packetId, uint8_t qos) {
                Serial.println("Subscribe acknowledged.");
                  Serial.print("  packetId: ");
                    Serial.println(packetId);
                      Serial.print("  qos: ");
                        Serial.println(qos);
                        }
                        void onMqttUnsubscribe(uint16_t packetId) {
                          Serial.println("Unsubscribe acknowledged.");
                            Serial.print("  packetId: ");
                              Serial.println(packetId);
                              }*/

                              void onMqttPublish(uint16_t packetId) {
                                Serial.print("Publish acknowledged.");
                                  Serial.print("  packetId: ");
                                    Serial.println(packetId);
                                    }

                                    void setup() {
                                      Serial.begin(115200);
                                        Serial.println();

                                          dht.begin();
                                            
                                              mqttReconnectTimer = xTimerCreate("mqttTimer", pdMS_TO_TICKS(2000), pdFALSE, (void*)0, reinterpret_cast<TimerCallbackFunction_t>(connectToMqtt));
                                                wifiReconnectTimer = xTimerCreate("wifiTimer", pdMS_TO_TICKS(2000), pdFALSE, (void*)0, reinterpret_cast<TimerCallbackFunction_t>(connectToWifi));

                                                  WiFi.onEvent(WiFiEvent);

                                                    mqttClient.onConnect(onMqttConnect);
                                                      mqttClient.onDisconnect(onMqttDisconnect);
                                                        //mqttClient.onSubscribe(onMqttSubscribe);
                                                          //mqttClient.onUnsubscribe(onMqttUnsubscribe);
                                                            mqttClient.onPublish(onMqttPublish);
                                                              mqttClient.setServer(MQTT_HOST, MQTT_PORT);
                                                                // If your broker requires authentication (username and password), set them below
                                                                  //mqttClient.setCredentials("REPlACE_WITH_YOUR_USER", "REPLACE_WITH_YOUR_PASSWORD");
                                                                    connectToWifi();
                                                                    }

                                                                    void loop() {
                                                                      unsigned long currentMillis = millis();
                                                                        // Every X number of seconds (interval = 10 seconds) 
                                                                          // it publishes a new MQTT message
                                                                            if (currentMillis - previousMillis >= interval) {
                                                                                // Save the last time a new reading was published
                                                                                    previousMillis = currentMillis;
                                                                                        // New DHT sensor readings
                                                                                            hum = dht.readHumidity();
                                                                                                // Read temperature as Celsius (the default)
                                                                                                    temp = dht.readTemperature();
                                                                                                        // Read temperature as Fahrenheit (isFahrenheit = true)
                                                                                                            //temp = dht.readTemperature(true);

                                                                                                                // Check if any reads failed and exit early (to try again).
                                                                                                                    if (isnan(temp) || isnan(hum)) {
                                                                                                                          Serial.println(F("Failed to read from DHT sensor!"));
                                                                                                                                return;
                                                                                                                                    }
                                                                                                                                        
                                                                                                                                            // Publish an MQTT message on topic esp32/dht/temperature
                                                                                                                                                uint16_t packetIdPub1 = mqttClient.publish(MQTT_PUB_TEMP, 1, true, String(temp).c_str());                            
                                                                                                                                                    Serial.printf("Publishing on topic %s at QoS 1, packetId: %i", MQTT_PUB_TEMP, packetIdPub1);
                                                                                                                                                        Serial.printf("Message: %.2f \n", temp);

                                                                                                                                                            // Publish an MQTT message on topic esp32/dht/humidity
                                                                                                                                                                uint16_t packetIdPub2 = mqttClient.publish(MQTT_PUB_HUM, 1, true, String(hum).c_str());                            
                                                                                                                                                                    Serial.printf("Publishing on topic %s at QoS 1, packetId %i: ", MQTT_PUB_HUM, packetIdPub2);
                                                                                                                                                                        Serial.printf("Message: %.2f \n", hum);
                                                                                                                                                                          }  Serial.print("Session present: ");
                                                                                                                                                                            Serial.println(sessionPresent);
                                                                                                                                                                            }

                                                                                                                                                                            void onMqttDisconnect(AsyncMqttClientDisconnectReason reason) {
                                                                                                                                                                              Serial.println("Disconnected from MQTT.");
                                                                                                                                                                                if (WiFi.isConnected()) {
                                                                                                                                                                                    xTimerStart(mqttReconnectTimer, 0);
                                                                                                                                                                                      }
                                                                                                                                                                                      }

                                                                                                                                                                                      /*void onMqttSubscribe(uint16_t packetId, uint8_t qos) {
                                                                                                                                                                                        Serial.println("Subscribe acknowledged.");
                                                                                                                                                                                          Serial.print("  packetId: ");
                                                                                                                                                                                            Serial.println(packetId);
                                                                                                                                                                                              Serial.print("  qos: ");
                                                                                                                                                                                                Serial.println(qos);
                                                                                                                                                                                                }
                                                                                                                                                                                                void onMqttUnsubscribe(uint16_t packetId) {
                                                                                                                                                                                                  Serial.println("Unsubscribe acknowledged.");
                                                                                                                                                                                                    Serial.print("  packetId: ");
                                                                                                                                                                                                      Serial.println(packetId);
                                                                                                                                                                                                      }*/

                                                                                                                                                                                                      void onMqttPublish(uint16_t packetId) {
                                                                                                                                                                                                        Serial.print("Publish acknowledged.");
                                                                                                                                                                                                          Serial.print("  packetId: ");
                                                                                                                                                                                                            Serial.println(packetId);
                                                                                                                                                                                                            }

                                                                                                                                                                                                            void setup() {
                                                                                                                                                                                                              Serial.begin(115200);
                                                                                                                                                                                                                Serial.println();

                                                                                                                                                                                                                  dht.begin();
                                                                                                                                                                                                                    
                                                                                                                                                                                                                      mqttReconnectTimer = xTimerCreate("mqttTimer", pdMS_TO_TICKS(2000), pdFALSE, (void*)0, reinterpret_cast<TimerCallbackFunction_t>(connectToMqtt));
                                                                                                                                                                                                                        wifiReconnectTimer = xTimerCreate("wifiTimer", pdMS_TO_TICKS(2000), pdFALSE, (void*)0, reinterpret_cast<TimerCallbackFunction_t>(connectToWifi));

                                                                                                                                                                                                                          WiFi.onEvent(WiFiEvent);

                                                                                                                                                                                                                            mqttClient.onConnect(onMqttConnect);
                                                                                                                                                                                                                              mqttClient.onDisconnect(onMqttDisconnect);
                                                                                                                                                                                                                                //mqttClient.onSubscribe(onMqttSubscribe);
                                                                                                                                                                                                                                  //mqttClient.onUnsubscribe(onMqttUnsubscribe);
                                                                                                                                                                                                                                    mqttClient.onPublish(onMqttPublish);
                                                                                                                                                                                                                                      mqttClient.setServer(MQTT_HOST, MQTT_PORT);
                                                                                                                                                                                                                                        // If your broker requires authentication (username and password), set them below
                                                                                                                                                                                                                                          //mqttClient.setCredentials("REPlACE_WITH_YOUR_USER", "REPLACE_WITH_YOUR_PASSWORD");
                                                                                                                                                                                                                                            connectToWifi();
                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                            void loop() {
                                                                                                                                                                                                                                              unsigned long currentMillis = millis();
                                                                                                                                                                                                                                                // Every X number of seconds (interval = 10 seconds) 
                                                                                                                                                                                                                                                  // it publishes a new MQTT message
                                                                                                                                                                                                                                                    if (currentMillis - previousMillis >= interval) {
                                                                                                                                                                                                                                                        // Save the last time a new reading was published
                                                                                                                                                                                                                                                            previousMillis = currentMillis;
                                                                                                                                                                                                                                                                // New DHT sensor readings
                                                                                                                                                                                                                                                                    hum = dht.readHumidity();
                                                                                                                                                                                                                                                                        // Read temperature as Celsius (the default)
                                                                                                                                                                                                                                                                            temp = dht.readTemperature();
                                                                                                                                                                                                                                                                                // Read temperature as Fahrenheit (isFahrenheit = true)
                                                                                                                                                                                                                                                                                    //temp = dht.readTemperature(true);

                                                                                                                                                                                                                                                                                        // Check if any reads failed and exit early (to try again).
                                                                                                                                                                                                                                                                                            if (isnan(temp) || isnan(hum)) {
                                                                                                                                                                                                                                                                                                  Serial.println(F("Failed to read from DHT sensor!"));
                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                    // Publish an MQTT message on topic esp32/dht/temperature
                                                                                                                                                                                                                                                                                                                        uint16_t packetIdPub1 = mqttClient.publish(MQTT_PUB_TEMP, 1, true, String(temp).c_str());                            
                                                                                                                                                                                                                                                                                                                            Serial.printf("Publishing on topic %s at QoS 1, packetId: %i", MQTT_PUB_TEMP, packetIdPub1);
                                                                                                                                                                                                                                                                                                                                Serial.printf("Message: %.2f \n", temp);

                                                                                                                                                                                                                                                                                                                                    // Publish an MQTT message on topic esp32/dht/humidity
                                                                                                                                                                                                                                                                                                                                        uint16_t packetIdPub2 = mqttClient.publish(MQTT_PUB_HUM, 1, true, String(hum).c_str());                            
                                                                                                                                                                                                                                                                                                                                            Serial.printf("Publishing on topic %s at QoS 1, packetId %i: ", MQTT_PUB_HUM, packetIdPub2);
                                                                                                                                                                                                                                                                                                                                                Serial.printf("Message: %.2f \n", hum);
                                                                                                                                                                                                                                                                                                                                                  }  Serial.print("Session present: ");
                                                                                                                                                                                                                                                                                                                                                    Serial.println(sessionPresent);
                                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                                    void onMqttDisconnect(AsyncMqttClientDisconnectReason reason) {
                                                                                                                                                                                                                                                                                                                                                      Serial.println("Disconnected from MQTT.");
                                                                                                                                                                                                                                                                                                                                                        if (WiFi.isConnected()) {
                                                                                                                                                                                                                                                                                                                                                            xTimerStart(mqttReconnectTimer, 0);
                                                                                                                                                                                                                                                                                                                                                              }
                                                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                                              /*void onMqttSubscribe(uint16_t packetId, uint8_t qos) {
                                                                                                                                                                                                                                                                                                                                                                Serial.println("Subscribe acknowledged.");
                                                                                                                                                                                                                                                                                                                                                                  Serial.print("  packetId: ");
                                                                                                                                                                                                                                                                                                                                                                    Serial.println(packetId);
                                                                                                                                                                                                                                                                                                                                                                      Serial.print("  qos: ");
                                                                                                                                                                                                                                                                                                                                                                        Serial.println(qos);
                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                        void onMqttUnsubscribe(uint16_t packetId) {
                                                                                                                                                                                                                                                                                                                                                                          Serial.println("Unsubscribe acknowledged.");
                                                                                                                                                                                                                                                                                                                                                                            Serial.print("  packetId: ");
                                                                                                                                                                                                                                                                                                                                                                              Serial.println(packetId);
                                                                                                                                                                                                                                                                                                                                                                              }*/

                                                                                                                                                                                                                                                                                                                                                                              void onMqttPublish(uint16_t packetId) {
                                                                                                                                                                                                                                                                                                                                                                                Serial.print("Publish acknowledged.");
                                                                                                                                                                                                                                                                                                                                                                                  Serial.print("  packetId: ");
                                                                                                                                                                                                                                                                                                                                                                                    Serial.println(packetId);
                                                                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                                                                    void setup() {
                                                                                                                                                                                                                                                                                                                                                                                      Serial.begin(115200);
                                                                                                                                                                                                                                                                                                                                                                                        Serial.println();

                                                                                                                                                                                                                                                                                                                                                                                          dht.begin();
                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                              mqttReconnectTimer = xTimerCreate("mqttTimer", pdMS_TO_TICKS(2000), pdFALSE, (void*)0, reinterpret_cast<TimerCallbackFunction_t>(connectToMqtt));
                                                                                                                                                                                                                                                                                                                                                                                                wifiReconnectTimer = xTimerCreate("wifiTimer", pdMS_TO_TICKS(2000), pdFALSE, (void*)0, reinterpret_cast<TimerCallbackFunction_t>(connectToWifi));

                                                                                                                                                                                                                                                                                                                                                                                                  WiFi.onEvent(WiFiEvent);

                                                                                                                                                                                                                                                                                                                                                                                                    mqttClient.onConnect(onMqttConnect);
                                                                                                                                                                                                                                                                                                                                                                                                      mqttClient.onDisconnect(onMqttDisconnect);
                                                                                                                                                                                                                                                                                                                                                                                                        //mqttClient.onSubscribe(onMqttSubscribe);
                                                                                                                                                                                                                                                                                                                                                                                                          //mqttClient.onUnsubscribe(onMqttUnsubscribe);
                                                                                                                                                                                                                                                                                                                                                                                                            mqttClient.onPublish(onMqttPublish);
                                                                                                                                                                                                                                                                                                                                                                                                              mqttClient.setServer(MQTT_HOST, MQTT_PORT);
                                                                                                                                                                                                                                                                                                                                                                                                                // If your broker requires authentication (username and password), set them below
                                                                                                                                                                                                                                                                                                                                                                                                                  //mqttClient.setCredentials("REPlACE_WITH_YOUR_USER", "REPLACE_WITH_YOUR_PASSWORD");
                                                                                                                                                                                                                                                                                                                                                                                                                    connectToWifi();
                                                                                                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                                                                                                    void loop() {
                                                                                                                                                                                                                                                                                                                                                                                                                      unsigned long currentMillis = millis();
                                                                                                                                                                                                                                                                                                                                                                                                                        // Every X number of seconds (interval = 10 seconds) 
                                                                                                                                                                                                                                                                                                                                                                                                                          // it publishes a new MQTT message
                                                                                                                                                                                                                                                                                                                                                                                                                            if (currentMillis - previousMillis >= interval) {
                                                                                                                                                                                                                                                                                                                                                                                                                                // Save the last time a new reading was published
                                                                                                                                                                                                                                                                                                                                                                                                                                    previousMillis = currentMillis;
                                                                                                                                                                                                                                                                                                                                                                                                                                        // New DHT sensor readings
                                                                                                                                                                                                                                                                                                                                                                                                                                            hum = dht.readHumidity();
                                                                                                                                                                                                                                                                                                                                                                                                                                                // Read temperature as Celsius (the default)
                                                                                                                                                                                                                                                                                                                                                                                                                                                    temp = dht.readTemperature();
                                                                                                                                                                                                                                                                                                                                                                                                                                                        // Read temperature as Fahrenheit (isFahrenheit = true)
                                                                                                                                                                                                                                                                                                                                                                                                                                                            //temp = dht.readTemperature(true);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                // Check if any reads failed and exit early (to try again).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (isnan(temp) || isnan(hum)) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Serial.println(F("Failed to read from DHT sensor!"));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            // Publish an MQTT message on topic esp32/dht/temperature
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                uint16_t packetIdPub1 = mqttClient.publish(MQTT_PUB_TEMP, 1, true, String(temp).c_str());                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Serial.printf("Publishing on topic %s at QoS 1, packetId: %i", MQTT_PUB_TEMP, packetIdPub1);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Serial.printf("Message: %.2f \n", temp);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            // Publish an MQTT message on topic esp32/dht/humidity
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                uint16_t packetIdPub2 = mqttClient.publish(MQTT_PUB_HUM, 1, true, String(hum).c_str());                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Serial.printf("Publishing on topic %s at QoS 1, packetId %i: ", MQTT_PUB_HUM, packetIdPub2);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Serial.printf("Message: %.2f \n", hum);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          }  Serial.print("Session present: ");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Serial.println(sessionPresent);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            void onMqttDisconnect(AsyncMqttClientDisconnectReason reason) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Serial.println("Disconnected from MQTT.");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (WiFi.isConnected()) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    xTimerStart(mqttReconnectTimer, 0);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      /*void onMqttSubscribe(uint16_t packetId, uint8_t qos) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Serial.println("Subscribe acknowledged.");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Serial.print("  packetId: ");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Serial.println(packetId);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Serial.print("  qos: ");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Serial.println(qos);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                void onMqttUnsubscribe(uint16_t packetId) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Serial.println("Unsubscribe acknowledged.");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Serial.print("  packetId: ");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Serial.println(packetId);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }*/

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      void onMqttPublish(uint16_t packetId) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Serial.print("Publish acknowledged.");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Serial.print("  packetId: ");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Serial.println(packetId);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            void setup() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Serial.begin(115200);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Serial.println();

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  dht.begin();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      mqttReconnectTimer = xTimerCreate("mqttTimer", pdMS_TO_TICKS(2000), pdFALSE, (void*)0, reinterpret_cast<TimerCallbackFunction_t>(connectToMqtt));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        wifiReconnectTimer = xTimerCreate("wifiTimer", pdMS_TO_TICKS(2000), pdFALSE, (void*)0, reinterpret_cast<TimerCallbackFunction_t>(connectToWifi));

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          WiFi.onEvent(WiFiEvent);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            mqttClient.onConnect(onMqttConnect);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              mqttClient.onDisconnect(onMqttDisconnect);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                //mqttClient.onSubscribe(onMqttSubscribe);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  //mqttClient.onUnsubscribe(onMqttUnsubscribe);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    mqttClient.onPublish(onMqttPublish);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      mqttClient.setServer(MQTT_HOST, MQTT_PORT);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        // If your broker requires authentication (username and password), set them below
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          //mqttClient.setCredentials("REPlACE_WITH_YOUR_USER", "REPLACE_WITH_YOUR_PASSWORD");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            connectToWifi();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            void loop() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              unsigned long currentMillis = millis();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                // Every X number of seconds (interval = 10 seconds) 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // it publishes a new MQTT message
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if (currentMillis - previousMillis >= interval) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        // Save the last time a new reading was published
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            previousMillis = currentMillis;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                // New DHT sensor readings
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    hum = dht.readHumidity();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        // Read temperature as Celsius (the default)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            temp = dht.readTemperature();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                // Read temperature as Fahrenheit (isFahrenheit = true)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //temp = dht.readTemperature(true);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        // Check if any reads failed and exit early (to try again).
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (isnan(temp) || isnan(hum)) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Serial.println(F("Failed to read from DHT sensor!"));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // Publish an MQTT message on topic esp32/dht/temperature
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        uint16_t packetIdPub1 = mqttClient.publish(MQTT_PUB_TEMP, 1, true, String(temp).c_str());                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Serial.printf("Publishing on topic %s at QoS 1, packetId: %i", MQTT_PUB_TEMP, packetIdPub1);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Serial.printf("Message: %.2f \n", temp);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // Publish an MQTT message on topic esp32/dht/humidity
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        uint16_t packetIdPub2 = mqttClient.publish(MQTT_PUB_HUM, 1, true, String(hum).c_str());                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Serial.printf("Publishing on topic %s at QoS 1, packetId %i: ", MQTT_PUB_HUM, packetIdPub2);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Serial.printf("Message: %.2f \n", hum);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  }